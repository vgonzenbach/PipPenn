---
title: "Movelet Prediction Results"
author: "Virgilio Gonzenbach"
date: "9/28/2021"
output: 
  html_document:
     toc: true
     toc_float: true
     theme: united
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, fig.align = "center",
                      message = FALSE, warning = FALSE,
                      fig.width = 10)
knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file())
```

# Movelet Predictions

Results are shown for training with one med session for sessions (5 6 8 9 11 12) + Wash Hands, Look Around Purse, and Walk_train as Control Activities. 

Testing activities consisted of `r knitr::combine_words(c("Walk_test", "Turn_Key","Open_Door","Eat_From_Bag","4._Med_Taking", "7._Med_Taking", "10._Med_Taking", "13._Med_Taking"))`.

```{r, echo=FALSE}
library(dplyr)
source("Code/functions.R")
source("Code/summary.R")
```

## Overall results

### Training with 1 med session

```{r}
patients = c(19, 20, 28, 32, 40, 52, 75, 86, 88, 89)
sessions = c(5, 6, 8, 9, 11, 12)

pairs = expand.grid(patients, sessions)
resPreds = pairs %>% apply(1, function(x) loadPrediction(patient = x["Var1"], ses = x["Var2"]))
tables = aggregate_tables(resPreds)
tables$confMatrix
get_metrics(tables$confMatrix)
tables$Session
```
## Med Taking Session 5

```{r}
pred = patients %>% lapply(function(x) loadPrediction(x, ses = 5))
tables = aggregate_tables(pred)
tables$confMatrix
get_metrics(tables$confMatrix) 
tables$Session
```

## Med Taking Session 6

```{r}
pred = patients %>% lapply(function(x) loadPrediction(x, ses = 6))
tables = aggregate_tables(pred)
tables$confMatrix
get_metrics(tables$confMatrix) 
tables$Session
```

## Med Taking Session 8

```{r}
pred = patients %>% lapply(function(x) loadPrediction(x, ses = 8))
tables = aggregate_tables(pred)
tables$confMatrix
get_metrics(tables$confMatrix) 
tables$Session
```

## Med Taking Session 9

```{r}
pred = patients %>% lapply(function(x) loadPrediction(x, ses = 9))
tables = aggregate_tables(pred)
tables$confMatrix
get_metrics(tables$confMatrix) 
tables$Session
```

## Med Taking Session 11

```{r}
pred = patients %>% lapply(function(x) loadPrediction(x, ses = 11))
tables = aggregate_tables(pred)
tables$confMatrix
get_metrics(tables$confMatrix) 
tables$Session
```

## Med Taking Session 12

```{r}
pred = patients %>% lapply(function(x) loadPrediction(x, ses = 12))
tables = aggregate_tables(pred)
tables$confMatrix
get_metrics(tables$confMatrix) 
tables$Session
```


## Patient 19

```{r}
pred = sessions %>% lapply(function(x) loadPrediction(19, ses = x))
tables = aggregate_tables(pred)
tables$confMatrix
get_metrics(tables$confMatrix) 
tables$Session
```

## Patient 20

```{r}
pred = sessions %>% lapply(function(x) loadPrediction(20, ses = x))
tables = aggregate_tables(pred)
tables$confMatrix
get_metrics(tables$confMatrix) 
tables$Session
```

## Patient 28 

```{r}
pred = sessions %>% lapply(function(x) loadPrediction(28, ses = x))
tables = aggregate_tables(pred)
tables$confMatrix
get_metrics(tables$confMatrix) 
tables$Session
```

## Patient 32

```{r}
pred = sessions %>% lapply(function(x) loadPrediction(32, ses = x))
tables = aggregate_tables(pred)
tables$confMatrix
get_metrics(tables$confMatrix) 
tables$Session
```

## Patient 40

```{r}
pred = sessions %>% lapply(function(x) loadPrediction(40, ses = x))
tables = aggregate_tables(pred)
tables$confMatrix
get_metrics(tables$confMatrix) 
tables$Session
```

## Patient 52

```{r}
pred = sessions %>% lapply(function(x) loadPrediction(52, ses = x))
tables = aggregate_tables(pred)
tables$confMatrix
get_metrics(tables$confMatrix) 
tables$Session
```

## Patient 75

```{r}
pred = sessions %>% lapply(function(x) loadPrediction(75, ses = x))
tables = aggregate_tables(pred)
tables$confMatrix
get_metrics(tables$confMatrix) 
tables$Session
```

## Patient 86

```{r}
pred = sessions %>% lapply(function(x) loadPrediction(86, ses = x))
tables = aggregate_tables(pred)
tables$confMatrix
get_metrics(tables$confMatrix) 
tables$Session
```

## Patient 88

```{r}
pred = sessions %>% lapply(function(x) loadPrediction(88, ses = x))
tables = aggregate_tables(pred)
tables$confMatrix
get_metrics(tables$confMatrix) 
tables$Session
```

## Patient 89

```{r}
pred = sessions %>% lapply(function(x) loadPrediction(89, ses = x))
tables = aggregate_tables(pred)
tables$confMatrix
get_metrics(tables$confMatrix) 
tables$Session
```
